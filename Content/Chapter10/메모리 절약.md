10장 메모리 절약

a. 핵심 – 단순함
 - 단순함은 기능성, 견고성, 속도 향상, 메모리 절약 등의 결과를 가져올 수 있다.

 

b. 이해를 돕는 문제
 사진 설명 : 2차원 배열로 데이터 구조를 결정
 위 사진의 문제점으로 프로그램이 커질수록 차지하는 메모리가 커지는 문제점이 있다.
 아래와 같은 사진으로 구조를 변경하여 문제를 해결했다.
 사진 설명 : 링크드 리스트로 데이터 구조를 변경
 
for ( p = colhead[i]; p != NULL; p = p->next)
if p->row == j
return p->pointnum
return –1

 - 위 코드에서 최악의 경우에는 배열의 어떤 요소를 차지하기 위해 200개의 노드를 방문해야 한다.
 - 만약 포인터와 구조체를 지원하지 않는 Fortran으로 구조를 구현해야 한다면 아래와 같은 사진으로 구현할 것이다.
 사진 설명 : 인덱스배열과 일반 배열을 가진 데이터 구조로 변경

for k = [firstincol[i], firstincol[i+1]]
if row[k] == k
return pointnum[k]
return –1

- 만약 점 자체에 행 번호가 함께 저장되어 있다면, 배열 row를 모두 제거할 수 있다.

for k = [firstincol[i], firstincol[i+1]]
if point[pointnum[k]].row == j
return pointnum[k]
return –1

c. 데이터 공간을 위한 기법

1. 저장하지 말고, 다시 계산함
 - 객체를 저장하지 않고 필요할 때마다 다시 계산하면 객체 저장에 피요한 메모리를 크게 절약할 수 있다.

2. 희박 데이터 구조
 - 저장되어야 할 키를 테이블에 대한 인덱스로 사용한다면, 키 자체를 저장할 필요가 없고, 참조된 횟수 등의 키와 관련된 항목만 저장한다.

3. 데이터 압축
 - 객체를 조밀하게 부호화하면 메모리를 절약할 수 있다.

4. 할당 정책
 - 메모리를 얼마나 많이 사용하는가보다는 어떻게 사용하는가가 더 중요할 수 있다.

d. 코드 공간을 위한 기법

1. 함수 정의
 - 코드에서 흔히 나타나는 패턴을 함수로 치환하는 방법으로 단순화시켜 코드 크기도 줄었고 의미도 더 명확해진다.

2. 인터프리터
 - 빌드와 유지보수를 더 간단히 할 수 있으며, 부가적으로 프로그램의 크기도 줄일 수 있다.

e. 원리

1. 메모리 비용
 - 프로그램에 따라 다르지만, 용량이 작은 시스템에서 메모리 부족으로 프로그램이 동작하지 않을 수 있다.

2. 메모리의 핫 스팟
 - 실행 시간은 특정 코드에 집중되어 몇 %정도의 코드가 실행 시간의 대부분을 차지하는 것은 흔하다. 하지만 코드가 차지하는 메모리는 그렇지 않으며, 데이터 구조가 용량의 몇 %를 차지할 수 있다.

3. 메모리 측정
 - 대부분의 시스템에서는 프로그래머가 실행 중인 프로그램이 사용하는 메모리를 관찰할 수 있도록 퍼포먼스 모니터를 제공한다.

4. 트레이드오프
 - 메모리를 얻기 위해 퍼포먼스나 기능성, 유지보수성의 감소를 감수해야 한다. 이런 결정은 다른 대안을 모두 검토한 후에 결정해야 한다.

5. 환경에 걸맞게 작업하라
 - 프로그램의 메모리 효율성은 프로그래밍 환경으로부터 큰 영향을 받는다.

6. 작업에 적합한 방법을 사용하라